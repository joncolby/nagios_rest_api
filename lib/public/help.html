<html>
<body>
<h2>nagios rest api commands</h2>
<table border=1>
<tr><td>method</td><td>command</td><td>description</td><td>parameters (* indicates required)</td></tr>

<tr><td>GET</td> <td>/hosts</td><td>show all hosts</td><td></td></tr>
<tr><td>GET</td> <td>/hosts/<b>hostname</b></td><td>show info for hostname</td><td></td></tr>
<tr><td>GET</td> <td>/hosts/find/<b>hostpattern</b></td><td>find hosts matching a simple pattern</td><td></td></tr>
<tr><td>PUT</td> <td>/hosts/<b>hostname</b>/downtime</td><td>set downtime</td><td>service=(service name), duration=(minutes, default: 60)</td></tr>
<tr><td>PUT</td> <td>/hosts/<b>hostname</b>/ack</td><td>set acknowledgement</td><td>service=(service name)</td></tr>
<tr><td>PUT</td> <td>/hosts/<b>hostname</b>/unack</td><td>unset acknowledgement</td><td>service=(service name)</td></tr>
<tr><td>PUT</td> <td>/hosts/<b>hostname</b>/enable</td><td>enable notifications</td><td>service=(service name)</td></tr>
<tr><td>PUT</td> <td>/hosts/<b>hostname</b>/disable</td><td>disable notifications</td><td>service=(service name)</td></tr>
<tr><td>POST</td> <td>/slack</td><td>work-in-progress</td><td>*hostname, *action, *token, service, duration</td></tr>
</table>



<p>
<h2>Notes:</h2>
<ul>
<li>for PUT actions, if no 'service' parameter is supplied, action will be applied to HOST</li>
<li>user/password is the same used for gw01 nagios</li>
<li>if there is a space in the service name, you can use '+'.  Example:  service=Swap+Usage</li>
</ul>
</p>

<h2>Examples:</h2>

<p>
<b>get a list of all hosts in Nagios (takes ~5 seconds)</b>
<pre>
curl -o - -u user:password https://muninmx.unbelievable-machine.net:9090/hosts
</pre>
</p>

<p>
<b>get detailed status information about host and service running on 'myhostname' (takes ~20 seconds)</b>
<pre>
curl -o - -u user:password https://muninmx.unbelievable-machine.net:9090/hosts/myhostname
</pre>
</p>

<p>
<b>find all hosts matching pattern *ghei* (make sure you put the url in 'single quotes')</b>
<pre>
curl -o - -u user:password 'https://muninmx.unbelievable-machine.net:9090/hosts/find/*ghei*'
</pre>
</p>



<p>
<b>set 10 minutes of downtime for service 'swap_utilisation' on host 'myhostname'</b>
<pre>
curl -o - -u user:password -X PUT -d service=swap_utilisation -d duration=10 https://muninmx.unbelievable-machine.net:9090/hosts/myhostname/downtime
</pre>
</p>


<p>
<b>set 60 minutes of downtime for host 'myhostname'</b>
<pre>
curl -o - -u user:password -X PUT -d duration=60 https://muninmx.unbelievable-machine.net:9090/hosts/myhostname/downtime
</pre>
</p>

<p>
<b>remove downtime for host 'myhostname'</b>
<pre>
curl -o - -u user:password -X PUT  https://muninmx.unbelievable-machine.net:9090/hosts/myhostname/nodowntime
</pre>
</p>



<p>
<b>acknowledge 'disk_utilization' service problem 'myhostname'</b>
<pre>
curl -o - -u user:password -X PUT -d service=disk_utilisation https://muninmx.unbelievable-machine.net:9090/hosts/myhostname/ack
</pre>
</p>

<p>
<b>remove acknowledgement for 'disk_utilization' service problem 'myhostname'</b>
<pre>
curl -o - -u user:password -X PUT -d service=disk_utilisation  https://muninmx.unbelievable-machine.net:9090/hosts/myhostname/unack
</pre>
</p>

<p>
<b>disable notifications for host 'myhostname'</b>
<pre>
curl -o - -u user:password -X PUT https://muninmx.unbelievable-machine.net:9090/hosts/myhostname/disable
</pre>
</p>

<!--

<h2>Slack commands</h2>
<table border="1">
<tr>
<td>/nagios hosts</td>
<td>show all host names</td>
</tr>

<tr>
<td>/nagios find hostpattern</td>
<td>show hosts matching pattern</td>
</tr>

<tr>
<td>/nagios host hostname</td>
<td>show detailed status for host</td>
</tr>

<tr>
<td>/nagios host hostname downtime minutes</td>
<td>set downtime on host for x minutes</td>
</tr>

<tr>
<td>/nagios host hostname ack</td>
<td>acknowledge host</td>
</tr>
</table>

-->

</body>
<html>